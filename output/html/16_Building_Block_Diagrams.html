<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>16 Building Block Diagrams</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.min.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">16 Building Block Diagrams</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#building-block-diagrams"
id="toc-building-block-diagrams"><span
class="toc-section-number">1</span> Building Block Diagrams</a>
<ul>
<li><a href="#vision-based-pick-and-place-robotic-system"
id="toc-vision-based-pick-and-place-robotic-system"><span
class="toc-section-number">1.1</span> Vision-Based Pick and Place
Robotic System</a></li>
<li><a href="#table-of-contents" id="toc-table-of-contents"><span
class="toc-section-number">1.2</span> Table of Contents</a></li>
<li><a href="#introduction" id="toc-introduction"><span
class="toc-section-number">1.3</span> 1. Introduction</a>
<ul>
<li><a href="#purpose" id="toc-purpose"><span
class="toc-section-number">1.3.1</span> 1.1 Purpose</a></li>
<li><a href="#block-diagram-notation"
id="toc-block-diagram-notation"><span
class="toc-section-number">1.3.2</span> 1.2 Block Diagram
Notation</a></li>
<li><a href="#design-principles" id="toc-design-principles"><span
class="toc-section-number">1.3.3</span> 1.3 Design Principles</a></li>
</ul></li>
<li><a href="#system-level-building-blocks"
id="toc-system-level-building-blocks"><span
class="toc-section-number">1.4</span> 2. System-Level Building
Blocks</a>
<ul>
<li><a href="#top-level-system-architecture"
id="toc-top-level-system-architecture"><span
class="toc-section-number">1.4.1</span> 2.1 Top-Level System
Architecture</a></li>
<li><a href="#system-block-specifications"
id="toc-system-block-specifications"><span
class="toc-section-number">1.4.2</span> 2.2 System Block
Specifications</a></li>
</ul></li>
<li><a href="#vision-subsystem-blocks"
id="toc-vision-subsystem-blocks"><span
class="toc-section-number">1.5</span> 3. Vision Subsystem Blocks</a>
<ul>
<li><a href="#vision-pipeline-detailed-blocks"
id="toc-vision-pipeline-detailed-blocks"><span
class="toc-section-number">1.5.1</span> 3.1 Vision Pipeline Detailed
Blocks</a></li>
<li><a href="#vision-block-data-flow"
id="toc-vision-block-data-flow"><span
class="toc-section-number">1.5.2</span> 3.2 Vision Block Data
Flow</a></li>
</ul></li>
<li><a href="#grasp-planning-subsystem-blocks"
id="toc-grasp-planning-subsystem-blocks"><span
class="toc-section-number">1.6</span> 4. Grasp Planning Subsystem
Blocks</a>
<ul>
<li><a href="#grasp-planning-blocks"
id="toc-grasp-planning-blocks"><span
class="toc-section-number">1.6.1</span> 4.1 Grasp Planning
Blocks</a></li>
<li><a href="#grasp-quality-computation-block"
id="toc-grasp-quality-computation-block"><span
class="toc-section-number">1.6.2</span> 4.2 Grasp Quality Computation
Block</a></li>
</ul></li>
<li><a href="#motion-planning-subsystem-blocks"
id="toc-motion-planning-subsystem-blocks"><span
class="toc-section-number">1.7</span> 5. Motion Planning Subsystem
Blocks</a>
<ul>
<li><a href="#motion-planning-pipeline"
id="toc-motion-planning-pipeline"><span
class="toc-section-number">1.7.1</span> 5.1 Motion Planning
Pipeline</a></li>
<li><a href="#collision-checking-block"
id="toc-collision-checking-block"><span
class="toc-section-number">1.7.2</span> 5.2 Collision Checking
Block</a></li>
</ul></li>
<li><a href="#control-subsystem-blocks"
id="toc-control-subsystem-blocks"><span
class="toc-section-number">1.8</span> 6. Control Subsystem Blocks</a>
<ul>
<li><a href="#real-time-control-loop"
id="toc-real-time-control-loop"><span
class="toc-section-number">1.8.1</span> 6.1 Real-Time Control
Loop</a></li>
<li><a href="#safety-monitor-block" id="toc-safety-monitor-block"><span
class="toc-section-number">1.8.2</span> 6.2 Safety Monitor
Block</a></li>
</ul></li>
<li><a href="#task-orchestration-subsystem-blocks"
id="toc-task-orchestration-subsystem-blocks"><span
class="toc-section-number">1.9</span> 7. Task Orchestration Subsystem
Blocks</a>
<ul>
<li><a href="#behavior-tree-orchestration"
id="toc-behavior-tree-orchestration"><span
class="toc-section-number">1.9.1</span> 7.1 Behavior Tree
Orchestration</a></li>
<li><a href="#error-recovery-block" id="toc-error-recovery-block"><span
class="toc-section-number">1.9.2</span> 7.2 Error Recovery
Block</a></li>
</ul></li>
<li><a href="#monitoring-logging-subsystem-blocks"
id="toc-monitoring-logging-subsystem-blocks"><span
class="toc-section-number">1.10</span> 8. Monitoring &amp; Logging
Subsystem Blocks</a>
<ul>
<li><a href="#metrics-collection-pipeline"
id="toc-metrics-collection-pipeline"><span
class="toc-section-number">1.10.1</span> 8.1 Metrics Collection
Pipeline</a></li>
<li><a href="#logging-architecture-block"
id="toc-logging-architecture-block"><span
class="toc-section-number">1.10.2</span> 8.2 Logging Architecture
Block</a></li>
</ul></li>
<li><a href="#data-flow-diagrams" id="toc-data-flow-diagrams"><span
class="toc-section-number">1.11</span> 9. Data Flow Diagrams</a>
<ul>
<li><a href="#end-to-end-pick-place-data-flow"
id="toc-end-to-end-pick-place-data-flow"><span
class="toc-section-number">1.11.1</span> 9.1 End-to-End Pick-Place Data
Flow</a></li>
<li><a href="#data-types-and-sizes" id="toc-data-types-and-sizes"><span
class="toc-section-number">1.11.2</span> 9.2 Data Types and
Sizes</a></li>
</ul></li>
<li><a href="#interface-specifications"
id="toc-interface-specifications"><span
class="toc-section-number">1.12</span> 10. Interface Specifications</a>
<ul>
<li><a href="#ros2-topic-interfaces"
id="toc-ros2-topic-interfaces"><span
class="toc-section-number">1.12.1</span> 10.1 ROS2 Topic
Interfaces</a></li>
<li><a href="#ros2-service-interfaces"
id="toc-ros2-service-interfaces"><span
class="toc-section-number">1.12.2</span> 10.2 ROS2 Service
Interfaces</a></li>
<li><a href="#ros2-action-interfaces"
id="toc-ros2-action-interfaces"><span
class="toc-section-number">1.12.3</span> 10.3 ROS2 Action
Interfaces</a></li>
</ul></li>
<li><a href="#summary" id="toc-summary"><span
class="toc-section-number">1.13</span> 11. Summary</a>
<ul>
<li><a href="#block-decomposition-summary"
id="toc-block-decomposition-summary"><span
class="toc-section-number">1.13.1</span> 11.1 Block Decomposition
Summary</a></li>
<li><a href="#system-properties" id="toc-system-properties"><span
class="toc-section-number">1.13.2</span> 11.2 System Properties</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 data-number="1" id="building-block-diagrams"><span
class="header-section-number">1</span> Building Block Diagrams</h1>
<h2 data-number="1.1"
id="vision-based-pick-and-place-robotic-system"><span
class="header-section-number">1.1</span> Vision-Based Pick and Place
Robotic System</h2>
<p><strong>Document Version:</strong> 1.0 <strong>Last Updated:</strong>
2025-10-18 <strong>Status:</strong> ✅ Complete</p>
<hr />
<h2 data-number="1.2" id="table-of-contents"><span
class="header-section-number">1.2</span> Table of Contents</h2>
<ol type="1">
<li><a href="#1-introduction">Introduction</a></li>
<li><a href="#2-system-level-building-blocks">System-Level Building
Blocks</a></li>
<li><a href="#3-vision-subsystem-blocks">Vision Subsystem
Blocks</a></li>
<li><a href="#4-grasp-planning-subsystem-blocks">Grasp Planning
Subsystem Blocks</a></li>
<li><a href="#5-motion-planning-subsystem-blocks">Motion Planning
Subsystem Blocks</a></li>
<li><a href="#6-control-subsystem-blocks">Control Subsystem
Blocks</a></li>
<li><a href="#7-task-orchestration-subsystem-blocks">Task Orchestration
Subsystem Blocks</a></li>
<li><a href="#8-monitoring--logging-subsystem-blocks">Monitoring &amp;
Logging Subsystem Blocks</a></li>
<li><a href="#9-data-flow-diagrams">Data Flow Diagrams</a></li>
<li><a href="#10-interface-specifications">Interface
Specifications</a></li>
</ol>
<hr />
<h2 data-number="1.3" id="introduction"><span
class="header-section-number">1.3</span> 1. Introduction</h2>
<h3 data-number="1.3.1" id="purpose"><span
class="header-section-number">1.3.1</span> 1.1 Purpose</h3>
<p>Building Block Diagrams provide a modular view of the system
architecture, showing how independent functional blocks connect and
communicate. Each block represents a cohesive unit with well-defined
inputs, outputs, and responsibilities.</p>
<h3 data-number="1.3.2" id="block-diagram-notation"><span
class="header-section-number">1.3.2</span> 1.2 Block Diagram
Notation</h3>
<pre><code>┌─────────────────────────┐
│   Block Name            │  ← Functional module
│   [Technology]          │
├─────────────────────────┤
│ Inputs:                 │  ← Data/signals in
│ • Input 1               │
│ • Input 2               │
├─────────────────────────┤
│ Processing:             │  ← Core functionality
│ • Function A            │
│ • Function B            │
├─────────────────────────┤
│ Outputs:                │  ← Data/signals out
│ • Output 1              │
│ • Output 2              │
└─────────────────────────┘

───▶  Data flow (synchronous)
- -▶  Data flow (asynchronous)
═══▶  Control signal</code></pre>
<h3 data-number="1.3.3" id="design-principles"><span
class="header-section-number">1.3.3</span> 1.3 Design Principles</h3>
<ul>
<li><strong>Modularity:</strong> Each block is independently testable
and replaceable</li>
<li><strong>Loose Coupling:</strong> Minimal dependencies between
blocks</li>
<li><strong>High Cohesion:</strong> Related functionality grouped within
blocks</li>
<li><strong>Standard Interfaces:</strong> ROS2 topics/services/actions
for communication</li>
<li><strong>Fault Isolation:</strong> Errors contained within
blocks</li>
</ul>
<hr />
<h2 data-number="1.4" id="system-level-building-blocks"><span
class="header-section-number">1.4</span> 2. System-Level Building
Blocks</h2>
<h3 data-number="1.4.1" id="top-level-system-architecture"><span
class="header-section-number">1.4.1</span> 2.1 Top-Level System
Architecture</h3>
<pre><code>                          ┌──────────────────────┐
                          │   User Interface     │
                          │   [Web Dashboard]    │
                          └──────────┬───────────┘
                                     │ HTTPS
                          ┌──────────▼───────────┐
                          │   Web Backend API    │
                          │   [FastAPI/gRPC]     │
                          └──────────┬───────────┘
                                     │ ROS2 Bridge
┌────────────────────────────────────┼────────────────────────────────┐
│                         ROS2 Middleware Layer                       │
│                         [DDS - CycloneDDS]                          │
└─┬──────┬──────┬──────┬─────┬──────┬──────┬──────┬──────────────────┘
  │      │      │      │     │      │      │      │
  │      │      │      │     │      │      │      │
  ▼      ▼      ▼      ▼     ▼      ▼      ▼      ▼
┌───┐  ┌───┐  ┌───┐  ┌───┐ ┌───┐  ┌───┐  ┌───┐  ┌─────────┐
│ 1 │  │ 2 │  │ 3 │  │ 4 │ │ 5 │  │ 6 │  │ 7 │  │    8    │
│   │  │   │  │   │  │   │ │   │  │   │  │   │  │         │
│ V │  │ G │  │ M │  │ C │ │ T │  │ G │  │ M │  │   DB    │
│ I │  │ R │  │ O │  │ O │ │ A │  │ R │  │ E │  │         │
│ S │  │ A │  │ T │  │ N │ │ S │  │ I │  │ T │  │ Postgre │
│ I │  │ S │  │ I │  │ T │ │ K │  │ P │  │ R │  │ InfluxDB│
│ O │  │ P │  │ O │  │ R │ │   │  │ P │  │ I │  │         │
│ N │  │   │  │ N │  │ O │ │ O │  │ E │  │ C │  │         │
│   │  │   │  │   │  │ L │ │ R │  │ R │  │ S │  │         │
└─┬─┘  └─┬─┘  └─┬─┘  └─┬─┘ └─┬─┘  └─┬─┘  └─┬─┘  └────┬────┘
  │      │      │      │     │      │      │         │
  │      │      │      │     │      │      │         │
  ▼      ▼      ▼      ▼     ▼      ▼      ▼         ▼
┌──────────────────────────────────────────────────────────┐
│              Hardware Abstraction Layer                  │
│  Camera │ Robot │ Gripper │ F/T Sensor │ Safety PLC     │
└──────────────────────────────────────────────────────────┘</code></pre>
<p><strong>Block Legend:</strong> 1. <strong>VISION</strong> - Computer
vision pipeline 2. <strong>GRASP</strong> - Grasp planning 3.
<strong>MOTION</strong> - Motion planning (MoveIt2) 4.
<strong>CONTROL</strong> - Real-time control (ros2_control) 5.
<strong>TASK ORCH</strong> - Task orchestration (Behavior Tree) 6.
<strong>GRIPPER</strong> - Gripper control 7. <strong>METRICS</strong> -
Monitoring &amp; metrics collection 8. <strong>DB</strong> - Data
persistence</p>
<h3 data-number="1.4.2" id="system-block-specifications"><span
class="header-section-number">1.4.2</span> 2.2 System Block
Specifications</h3>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 12%" />
<col style="width: 15%" />
<col style="width: 16%" />
<col style="width: 20%" />
<col style="width: 18%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Block ID</strong></th>
<th><strong>Name</strong></th>
<th><strong>Inputs</strong></th>
<th><strong>Outputs</strong></th>
<th><strong>Technology</strong></th>
<th><strong>Frequency</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>1</strong></td>
<td>Vision Pipeline</td>
<td>RGB-D images</td>
<td>Object poses</td>
<td>Python, YOLOv8, TensorRT</td>
<td>30 Hz</td>
</tr>
<tr class="even">
<td><strong>2</strong></td>
<td>Grasp Planner</td>
<td>Object poses</td>
<td>Grasp candidates</td>
<td>Python, NumPy, Open3D</td>
<td>On demand</td>
</tr>
<tr class="odd">
<td><strong>3</strong></td>
<td>Motion Planner</td>
<td>Grasp/place poses</td>
<td>Joint trajectories</td>
<td>C++, MoveIt2, OMPL</td>
<td>On demand</td>
</tr>
<tr class="even">
<td><strong>4</strong></td>
<td>Controller</td>
<td>Joint trajectories</td>
<td>Joint commands</td>
<td>C++, ros2_control</td>
<td>1000 Hz</td>
</tr>
<tr class="odd">
<td><strong>5</strong></td>
<td>Task Orchestrator</td>
<td>Triggers, events</td>
<td>Task commands</td>
<td>C++/Python, BT.CPP</td>
<td>10 Hz</td>
</tr>
<tr class="even">
<td><strong>6</strong></td>
<td>Gripper Controller</td>
<td>Grasp commands</td>
<td>Gripper position</td>
<td>Python, Modbus</td>
<td>20 Hz</td>
</tr>
<tr class="odd">
<td><strong>7</strong></td>
<td>Metrics Collector</td>
<td>System telemetry</td>
<td>Metrics (Prom/Influx)</td>
<td>Python</td>
<td>1 Hz</td>
</tr>
<tr class="even">
<td><strong>8</strong></td>
<td>Database</td>
<td>CRUD operations</td>
<td>Query results</td>
<td>PostgreSQL, InfluxDB</td>
<td>On demand</td>
</tr>
</tbody>
</table>
<hr />
<h2 data-number="1.5" id="vision-subsystem-blocks"><span
class="header-section-number">1.5</span> 3. Vision Subsystem Blocks</h2>
<h3 data-number="1.5.1" id="vision-pipeline-detailed-blocks"><span
class="header-section-number">1.5.1</span> 3.1 Vision Pipeline Detailed
Blocks</h3>
<pre><code>┌──────────────────────────────────────────────────────────────────┐
│                    Vision Subsystem                              │
└──────────────────────────────────────────────────────────────────┘

┌─────────────────────────┐
│  Camera Driver Block    │
│  [RealSense SDK]        │
├─────────────────────────┤
│ Inputs:                 │
│ • Trigger (ROS2 topic)  │
├─────────────────────────┤
│ Processing:             │
│ • Initialize camera     │
│ • Capture RGB stream    │
│ • Capture depth stream  │
│ • Align depth to color  │
│ • Publish camera info   │
├─────────────────────────┤
│ Outputs:                │
│ • RGB image (1280×720)  │
│ • Depth image (aligned) │
│ • Camera intrinsics     │
└───────────┬─────────────┘
            │
            │ 30 Hz
            ▼
┌─────────────────────────┐
│ Image Preprocessor      │
│ [OpenCV]                │
├─────────────────────────┤
│ Inputs:                 │
│ • Raw RGB image         │
├─────────────────────────┤
│ Processing:             │
│ • Denoise (bilateral)   │
│ • Enhance contrast      │
│ • Color correction      │
│ • Resize (640×640)      │
├─────────────────────────┤
│ Outputs:                │
│ • Preprocessed image    │
└───────────┬─────────────┘
            │
            │ 30 Hz
            ▼
┌─────────────────────────┐
│ Object Detector         │
│ [YOLOv8 + TensorRT]     │
├─────────────────────────┤
│ Inputs:                 │
│ • Preprocessed image    │
├─────────────────────────┤
│ Processing:             │
│ • Load TensorRT engine  │
│ • Run inference (GPU)   │
│ • Post-process (NMS)    │
│ • Filter by confidence  │
├─────────────────────────┤
│ Outputs:                │
│ • Bounding boxes        │
│ • Class labels          │
│ • Confidence scores     │
└───────────┬─────────────┘
            │
            │ 20 Hz
            ▼
┌─────────────────────────┐
│ Pose Estimator          │
│ [PCA / PVNet]           │
├─────────────────────────┤
│ Inputs:                 │
│ • Bounding boxes        │
│ • Depth image           │
│ • Camera intrinsics     │
├─────────────────────────┤
│ Processing:             │
│ • Extract point cloud   │
│ • Segment object cloud  │
│ • PCA-based orientation │
│ • Compute 6DoF pose     │
│ • Publish TF transform  │
├─────────────────────────┤
│ Outputs:                │
│ • Object pose (6DoF)    │
│ • Object point cloud    │
│ • TF: camera → object   │
└───────────┬─────────────┘
            │
            ▼
      [To Grasp Planner]</code></pre>
<h3 data-number="1.5.2" id="vision-block-data-flow"><span
class="header-section-number">1.5.2</span> 3.2 Vision Block Data
Flow</h3>
<table style="width:100%;">
<colgroup>
<col style="width: 14%" />
<col style="width: 20%" />
<col style="width: 22%" />
<col style="width: 16%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Block</strong></th>
<th><strong>Input Data</strong></th>
<th><strong>Output Data</strong></th>
<th><strong>Latency</strong></th>
<th><strong>Error Handling</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Camera Driver</strong></td>
<td>USB trigger</td>
<td>RGB (1280×720, 8UC3)<br>Depth (1280×720, 16UC1)</td>
<td>&lt;10 ms</td>
<td>Retry on USB disconnect</td>
</tr>
<tr class="even">
<td><strong>Preprocessor</strong></td>
<td>Raw image</td>
<td>Processed image (640×640)</td>
<td>&lt;5 ms</td>
<td>Skip frame on error</td>
</tr>
<tr class="odd">
<td><strong>Object Detector</strong></td>
<td>Image (640×640)</td>
<td>Detection2DArray</td>
<td>&lt;50 ms</td>
<td>Return empty on timeout</td>
</tr>
<tr class="even">
<td><strong>Pose Estimator</strong></td>
<td>Detections + Depth</td>
<td>PoseArray (6DoF)</td>
<td>&lt;30 ms</td>
<td>Use previous pose on fail</td>
</tr>
</tbody>
</table>
<hr />
<h2 data-number="1.6" id="grasp-planning-subsystem-blocks"><span
class="header-section-number">1.6</span> 4. Grasp Planning Subsystem
Blocks</h2>
<h3 data-number="1.6.1" id="grasp-planning-blocks"><span
class="header-section-number">1.6.1</span> 4.1 Grasp Planning
Blocks</h3>
<pre><code>┌─────────────────────────┐
│  Grasp Synthesizer      │
│  [Analytical + Sampling]│
├─────────────────────────┤
│ Inputs:                 │
│ • Object pose (6DoF)    │
│ • Object dimensions     │
│ • Object shape type     │
├─────────────────────────┤
│ Processing:             │
│ • Generate candidates   │
│   - Antipodal grasps    │
│   - Top grasps          │
│   - Side grasps         │
│ • Sample approach dirs  │
│ • Set gripper widths    │
├─────────────────────────┤
│ Outputs:                │
│ • Grasp candidates (20) │
│ • Pre-grasp poses       │
│ • Approach vectors      │
└───────────┬─────────────┘
            │
            │ 200 ms
            ▼
┌─────────────────────────┐
│  Grasp Evaluator        │
│  [Quality Metrics]      │
├─────────────────────────┤
│ Inputs:                 │
│ • Grasp candidates      │
│ • Object geometry       │
├─────────────────────────┤
│ Processing:             │
│ • Compute quality score │
│   - Ferrari-Canny       │
│   - Force closure       │
│   - Wrench space vol.   │
│ • Rank by quality       │
│ • Filter by threshold   │
├─────────────────────────┤
│ Outputs:                │
│ • Ranked grasps (top 5) │
│ • Quality scores        │
└───────────┬─────────────┘
            │
            │ 50 ms
            ▼
┌─────────────────────────┐
│  Collision Checker      │
│  [MoveIt Planning Scene]│
├─────────────────────────┤
│ Inputs:                 │
│ • Grasp candidates      │
│ • Planning scene        │
├─────────────────────────┤
│ Processing:             │
│ • Solve IK for grasp    │
│ • Check self-collision  │
│ • Check env. collision  │
│ • Check joint limits    │
├─────────────────────────┤
│ Outputs:                │
│ • Valid grasps (1-3)    │
│ • IK solutions          │
└───────────┬─────────────┘
            │
            ▼
      [To Motion Planner]</code></pre>
<h3 data-number="1.6.2" id="grasp-quality-computation-block"><span
class="header-section-number">1.6.2</span> 4.2 Grasp Quality Computation
Block</h3>
<pre><code>┌──────────────────────────────────────────┐
│       Grasp Quality Evaluator            │
├──────────────────────────────────────────┤
│ Input: Grasp candidate G                 │
│   - Contact points: p1, p2               │
│   - Contact normals: n1, n2              │
│   - Gripper width: w                     │
│   - Friction coefficient: μ              │
├──────────────────────────────────────────┤
│ Algorithm:                               │
│   1. Build grasp matrix G (6×n)          │
│      G = [f1, ..., fn; τ1, ..., τn]      │
│      where fi = contact force            │
│            τi = contact torque           │
│   2. Compute grasp wrench space W        │
│      W = convexHull(G)                   │
│   3. Compute quality metric              │
│      Q = min_wrench / object_weight      │
│   4. Check force closure                 │
│      rank(G) == 6 → force closure        │
├──────────────────────────────────────────┤
│ Output: Quality score Q ∈ [0, 1]         │
└──────────────────────────────────────────┘</code></pre>
<hr />
<h2 data-number="1.7" id="motion-planning-subsystem-blocks"><span
class="header-section-number">1.7</span> 5. Motion Planning Subsystem
Blocks</h2>
<h3 data-number="1.7.1" id="motion-planning-pipeline"><span
class="header-section-number">1.7.1</span> 5.1 Motion Planning
Pipeline</h3>
<pre><code>┌─────────────────────────┐
│  Motion Request         │
│  [ROS2 Action Client]   │
├─────────────────────────┤
│ Inputs:                 │
│ • Target pose (6DoF)    │
│ • Constraints (optional)│
│ • Planning group        │
├─────────────────────────┤
│ Processing:             │
│ • Validate request      │
│ • Set planner timeout   │
│ • Configure planning    │
├─────────────────────────┤
│ Outputs:                │
│ • Planning request msg  │
└───────────┬─────────────┘
            │
            │
            ▼
┌─────────────────────────┐
│  Inverse Kinematics     │
│  [KDL / Analytical IK]  │
├─────────────────────────┤
│ Inputs:                 │
│ • Target EEF pose       │
│ • Seed joint state      │
├─────────────────────────┤
│ Processing:             │
│ • Solve IK equation     │
│ • Find all solutions    │
│ • Select nearest to seed│
│ • Validate joint limits │
├─────────────────────────┤
│ Outputs:                │
│ • Joint configuration   │
│   (6 joint angles)      │
└───────────┬─────────────┘
            │
            │ 5-10 ms
            ▼
┌─────────────────────────┐
│  Path Planner           │
│  [OMPL - RRTConnect]    │
├─────────────────────────┤
│ Inputs:                 │
│ • Start joint config    │
│ • Goal joint config     │
│ • Planning scene        │
├─────────────────────────┤
│ Processing:             │
│ • Build state space     │
│ • Sample random states  │
│ • Extend trees (bi-dir) │
│ • Check collisions      │
│ • Connect trees         │
│ • Simplify path         │
├─────────────────────────┤
│ Outputs:                │
│ • Joint waypoints       │
│   (N × 6 matrix)        │
└───────────┬─────────────┘
            │
            │ 100-300 ms
            ▼
┌─────────────────────────┐
│  Trajectory Generator   │
│  [Time Parameterization]│
├─────────────────────────┤
│ Inputs:                 │
│ • Joint waypoints       │
│ • Velocity limits       │
│ • Acceleration limits   │
├─────────────────────────┤
│ Processing:             │
│ • Time-optimal param.   │
│ • Cubic spline interp.  │
│ • Velocity profiling    │
│ • Add timestamps        │
├─────────────────────────┤
│ Outputs:                │
│ • Joint trajectory      │
│   (positions, vels,     │
│    accels, times)       │
└───────────┬─────────────┘
            │
            ▼
      [To Controller]</code></pre>
<h3 data-number="1.7.2" id="collision-checking-block"><span
class="header-section-number">1.7.2</span> 5.2 Collision Checking
Block</h3>
<pre><code>┌──────────────────────────────────────────┐
│       Collision Checker                  │
│       [FCL Library]                      │
├──────────────────────────────────────────┤
│ Inputs:                                  │
│ • Robot state (joint angles)             │
│ • Planning scene (obstacles)             │
│ • Allowed collision matrix               │
├──────────────────────────────────────────┤
│ Processing:                              │
│ 1. Update robot kinematics               │
│    FK: joints → link poses               │
│ 2. Update collision geometries           │
│    Bounding volumes (AABB, OBB)          │
│ 3. Broad-phase collision detection       │
│    Sweep and prune algorithm             │
│ 4. Narrow-phase detection                │
│    GJK algorithm for convex shapes       │
│ 5. Distance computation                  │
│    Minimum distance between bodies       │
│ 6. Check allowed collisions              │
│    Filter expected contacts              │
├──────────────────────────────────────────┤
│ Outputs:                                 │
│ • Collision: bool                        │
│ • Collision pairs: [(link1, link2), ...] │
│ • Min distance: float (meters)           │
└──────────────────────────────────────────┘</code></pre>
<hr />
<h2 data-number="1.8" id="control-subsystem-blocks"><span
class="header-section-number">1.8</span> 6. Control Subsystem
Blocks</h2>
<h3 data-number="1.8.1" id="real-time-control-loop"><span
class="header-section-number">1.8.1</span> 6.1 Real-Time Control
Loop</h3>
<pre><code>┌─────────────────────────┐
│  Controller Manager     │
│  [ros2_control]         │
├─────────────────────────┤
│ Inputs:                 │
│ • Trajectory (desired)  │
│ • Joint states (actual) │
├─────────────────────────┤
│ Processing:             │
│ • Load controllers      │
│ • Manage lifecycle      │
│ • Route commands        │
│ • Monitor health        │
├─────────────────────────┤
│ Outputs:                │
│ • Control updates       │
│   @ 1000 Hz             │
└───────────┬─────────────┘
            │
            │ 1 kHz
            ▼
┌─────────────────────────┐
│  Joint Trajectory Ctrl  │
│  [PID + Feedforward]    │
├─────────────────────────┤
│ Inputs:                 │
│ • Desired: qd, q̇d, q̈d   │
│ • Actual: q, q̇           │
├─────────────────────────┤
│ Processing:             │
│ • Interpolate trajectory│
│ • Compute error e = qd-q│
│ • PID control:          │
│   τ = Kp·e + Kd·ė + Ki·∫e│
│ • Feedforward:          │
│   τff = M(q)·q̈d + C·q̇d  │
│ • Sum: τ_total = τ+τff  │
├─────────────────────────┤
│ Outputs:                │
│ • Joint torques τ       │
│   (6 values)            │
└───────────┬─────────────┘
            │
            │ 1 kHz
            ▼
┌─────────────────────────┐
│  Hardware Interface     │
│  [EtherCAT Master]      │
├─────────────────────────┤
│ Inputs:                 │
│ • Torque commands       │
├─────────────────────────┤
│ Processing:             │
│ • Pack EtherCAT frame   │
│ • Send to robot (CAN)   │
│ • Read joint encoders   │
│ • Unpack sensor data    │
├─────────────────────────┤
│ Outputs:                │
│ • Joint positions       │
│ • Joint velocities      │
│ • Joint efforts         │
└───────────┬─────────────┘
            │
            ▼
    [UR5e Robot Hardware]</code></pre>
<h3 data-number="1.8.2" id="safety-monitor-block"><span
class="header-section-number">1.8.2</span> 6.2 Safety Monitor Block</h3>
<pre><code>┌──────────────────────────────────────────┐
│       Safety Monitor                     │
├──────────────────────────────────────────┤
│ Inputs:                                  │
│ • Joint positions q                      │
│ • Joint velocities q̇                     │
│ • Joint efforts τ                        │
│ • F/T sensor data                        │
│ • E-stop signal (digital input)          │
├──────────────────────────────────────────┤
│ Processing:                              │
│ 1. Check joint limits                    │
│    q_min ≤ q ≤ q_max                     │
│ 2. Check velocity limits                 │
│    |q̇| ≤ q̇_max                           │
│ 3. Check effort limits                   │
│    |τ| ≤ τ_max                           │
│ 4. Check workspace bounds                │
│    FK(q) ∈ workspace_volume              │
│ 5. Check contact forces                  │
│    |F_contact| ≤ 150N (ISO/TS 15066)     │
│ 6. Check E-stop signal                   │
│    estop == LOW → trigger stop           │
├──────────────────────────────────────────┤
│ Outputs:                                 │
│ • Safety status: OK | WARNING | FAULT    │
│ • Alert messages                         │
│ • E-stop command (if violation)          │
├──────────────────────────────────────────┤
│ Safety Reaction:                         │
│ • WARNING: Log + notify                  │
│ • FAULT: Stop robot + alert operator     │
└──────────────────────────────────────────┘</code></pre>
<hr />
<h2 data-number="1.9" id="task-orchestration-subsystem-blocks"><span
class="header-section-number">1.9</span> 7. Task Orchestration Subsystem
Blocks</h2>
<h3 data-number="1.9.1" id="behavior-tree-orchestration"><span
class="header-section-number">1.9.1</span> 7.1 Behavior Tree
Orchestration</h3>
<pre><code>┌─────────────────────────┐
│  Behavior Tree Engine   │
│  [BT.CPP]               │
├─────────────────────────┤
│ Inputs:                 │
│ • System triggers       │
│ • Sensor events         │
│ • Blackboard state      │
├─────────────────────────┤
│ Processing:             │
│ • Load XML tree def.    │
│ • Tick root node @ 10Hz │
│ • Execute action nodes  │
│ • Evaluate conditions   │
│ • Update blackboard     │
│ • Handle node returns   │
├─────────────────────────┤
│ Outputs:                │
│ • Action commands       │
│ • Task status           │
│ • Error signals         │
└───────────┬─────────────┘
            │
            │ Ticks @ 10 Hz
            ▼
┌─────────────────────────┐
│  Action Node: Detect    │
├─────────────────────────┤
│ Processing:             │
│ • Call /vision/detect   │
│ • Wait for response     │
│ • Store in blackboard   │
├─────────────────────────┤
│ Returns:                │
│ • SUCCESS: Objects found│
│ • FAILURE: No objects   │
│ • RUNNING: In progress  │
└───────────┬─────────────┘
            │
┌───────────┴─────────────┐
│  Action Node: PlanGrasp │
├─────────────────────────┤
│ Processing:             │
│ • Get object from BB    │
│ • Call /grasp/compute   │
│ • Select best grasp     │
│ • Store in blackboard   │
├─────────────────────────┤
│ Returns:                │
│ • SUCCESS: Valid grasp  │
│ • FAILURE: No valid     │
└───────────┬─────────────┘
            │
┌───────────┴─────────────┐
│ Action Node: ExecutePick│
├─────────────────────────┤
│ Processing:             │
│ • Get grasp from BB     │
│ • Call /pick_place      │
│ • Monitor feedback      │
│ • Publish progress      │
├─────────────────────────┤
│ Returns:                │
│ • SUCCESS: Pick done    │
│ • FAILURE: Pick failed  │
│ • RUNNING: Executing    │
└─────────────────────────┘</code></pre>
<h3 data-number="1.9.2" id="error-recovery-block"><span
class="header-section-number">1.9.2</span> 7.2 Error Recovery Block</h3>
<pre><code>┌──────────────────────────────────────────┐
│       Error Recovery Manager             │
├──────────────────────────────────────────┤
│ Inputs:                                  │
│ • Error type (enum)                      │
│ • Error context (state snapshot)         │
│ • Retry count                            │
├──────────────────────────────────────────┤
│ Processing:                              │
│ 1. Classify error                        │
│    • Recoverable (grasp fail, IK fail)   │
│    • Critical (collision, E-stop)        │
│ 2. Select recovery strategy              │
│    • Retry with adjustment               │
│    • Fallback to alternative             │
│    • Abort and reset                     │
│ 3. Execute recovery                      │
│    • Adjust parameters (force, approach) │
│    • Re-plan with different config       │
│    • Request operator intervention       │
│ 4. Update retry counter                  │
│ 5. Log recovery attempt                  │
├──────────────────────────────────────────┤
│ Outputs:                                 │
│ • Recovery action                        │
│ • Updated system state                   │
│ • Success/failure flag                   │
├──────────────────────────────────────────┤
│ Recovery Strategies:                     │
│ • Grasp failure → Increase force 10%     │
│ • IK failure → Sample different seed     │
│ • Planning timeout → Use simpler planner │
│ • Collision → Replan with more clearance │
└──────────────────────────────────────────┘</code></pre>
<hr />
<h2 data-number="1.10" id="monitoring-logging-subsystem-blocks"><span
class="header-section-number">1.10</span> 8. Monitoring &amp; Logging
Subsystem Blocks</h2>
<h3 data-number="1.10.1" id="metrics-collection-pipeline"><span
class="header-section-number">1.10.1</span> 8.1 Metrics Collection
Pipeline</h3>
<pre><code>┌─────────────────────────┐
│  ROS2 Topic Subscribers │
├─────────────────────────┤
│ Subscribed Topics:      │
│ • /joint_states         │
│ • /task/status          │
│ • /vision/object_poses  │
│ • /pick_place/feedback  │
└───────────┬─────────────┘
            │ 10-100 Hz
            ▼
┌─────────────────────────┐
│  Metrics Aggregator     │
├─────────────────────────┤
│ Processing:             │
│ • Compute cycle time    │
│ • Track success rate    │
│ • Calculate uptime      │
│ • Measure latencies     │
└───────────┬─────────────┘
            │
            ├─────────────────┐
            │                 │
            ▼                 ▼
┌─────────────────┐  ┌─────────────────┐
│ Prometheus      │  │  InfluxDB       │
│ Exporter        │  │  Writer         │
├─────────────────┤  ├─────────────────┤
│ • Counter       │  │ • Time-series   │
│ • Gauge         │  │ • Retention 30d │
│ • Histogram     │  │ • Downsampling  │
└────────┬────────┘  └────────┬────────┘
         │                    │
         ▼                    ▼
┌─────────────────┐  ┌─────────────────┐
│ Prometheus DB   │  │  InfluxDB       │
│ (15 day retain) │  │  (30 day retain)│
└────────┬────────┘  └────────┬────────┘
         │                    │
         └──────────┬─────────┘
                    ▼
         ┌─────────────────────┐
         │   Grafana           │
         │   Dashboards        │
         └─────────────────────┘</code></pre>
<h3 data-number="1.10.2" id="logging-architecture-block"><span
class="header-section-number">1.10.2</span> 8.2 Logging Architecture
Block</h3>
<pre><code>┌──────────────────────────────────────────┐
│         Application Logs                 │
│  (rclcpp::Logger, Python logging)        │
└────────────────┬─────────────────────────┘
                 │ stdout/stderr
                 ▼
┌──────────────────────────────────────────┐
│       Docker JSON Logging Driver         │
└────────────────┬─────────────────────────┘
                 │ /var/lib/docker/containers/
                 ▼
┌──────────────────────────────────────────┐
│            Filebeat                      │
│  (Log shipper)                           │
├──────────────────────────────────────────┤
│ Processing:                              │
│ • Tail log files                         │
│ • Parse JSON format                      │
│ • Add metadata (host, container ID)      │
│ • Buffer and batch                       │
└────────────────┬─────────────────────────┘
                 │ Beats protocol
                 ▼
┌──────────────────────────────────────────┐
│            Logstash                      │
│  (Log processing)                        │
├──────────────────────────────────────────┤
│ Processing:                              │
│ • Parse log levels                       │
│ • Extract structured fields              │
│ • Enrich with context                    │
│ • Filter sensitive data                  │
│ • Route by log level                     │
└────────────────┬─────────────────────────┘
                 │ HTTP bulk API
                 ▼
┌──────────────────────────────────────────┐
│         Elasticsearch                    │
│  (Log storage)                           │
├──────────────────────────────────────────┤
│ Indices:                                 │
│ • logs-robot-YYYY.MM.DD                  │
│ Retention: 30 days                       │
│ Replica: 1                               │
└────────────────┬─────────────────────────┘
                 │ REST API
                 ▼
┌──────────────────────────────────────────┐
│            Kibana                        │
│  (Log visualization)                     │
├──────────────────────────────────────────┤
│ Features:                                │
│ • Log search &amp; filtering                 │
│ • Dashboards (error rate, latency)       │
│ • Alerts (error spike &gt; 10/min)          │
└──────────────────────────────────────────┘</code></pre>
<hr />
<h2 data-number="1.11" id="data-flow-diagrams"><span
class="header-section-number">1.11</span> 9. Data Flow Diagrams</h2>
<h3 data-number="1.11.1" id="end-to-end-pick-place-data-flow"><span
class="header-section-number">1.11.1</span> 9.1 End-to-End Pick-Place
Data Flow</h3>
<pre><code>┌──────┐    ┌────────┐    ┌───────┐    ┌────────┐    ┌─────────┐    ┌────────┐
│Trigger│───▶│ Vision │───▶│ Grasp │───▶│ Motion │───▶│ Control │───▶│ Robot  │
│      │    │Pipeline│    │Planner│    │Planner │    │ System  │    │Hardware│
└──────┘    └────────┘    └───────┘    └────────┘    └─────────┘    └────────┘
              │              │             │              │              │
              │ Objects      │ Grasp       │ Trajectory   │ Joint        │ Encoder
              │ (6DoF)       │ (pose,      │ (q, q̇, t)    │ torques      │ feedback
              │              │  width,     │              │              │
              │              │  force)     │              │              │
              ▼              ▼             ▼              ▼              ▼
         ┌──────────────────────────────────────────────────────────────────┐
         │                     Blackboard (Shared State)                    │
         │  • detections: Detection2DArray                                  │
         │  • object_poses: PoseArray                                       │
         │  • selected_grasp: Grasp                                         │
         │  • planned_trajectory: JointTrajectory                           │
         │  • execution_status: TaskStatus                                  │
         └──────────────────────────────────────────────────────────────────┘
                                        ▲
                                        │ Read/Write
                                        │
                              ┌─────────┴──────────┐
                              │  Task Orchestrator │
                              │  (Behavior Tree)   │
                              └────────────────────┘</code></pre>
<h3 data-number="1.11.2" id="data-types-and-sizes"><span
class="header-section-number">1.11.2</span> 9.2 Data Types and
Sizes</h3>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 12%" />
<col style="width: 18%" />
<col style="width: 25%" />
<col style="width: 26%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Data Type</strong></th>
<th><strong>Size</strong></th>
<th><strong>Frequency</strong></th>
<th><strong>Total Bandwidth</strong></th>
<th><strong>Storage/Retention</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>RGB Image</td>
<td>2.7 MB (1280×720×3)</td>
<td>30 Hz</td>
<td>81 MB/s</td>
<td>Not stored (real-time only)</td>
</tr>
<tr class="even">
<td>Depth Image</td>
<td>1.8 MB (1280×720×2)</td>
<td>30 Hz</td>
<td>54 MB/s</td>
<td>Not stored</td>
</tr>
<tr class="odd">
<td>Detections</td>
<td>2 KB</td>
<td>20 Hz</td>
<td>40 KB/s</td>
<td>Stored (PostgreSQL, 30 days)</td>
</tr>
<tr class="even">
<td>Object Poses</td>
<td>1 KB</td>
<td>20 Hz</td>
<td>20 KB/s</td>
<td>Stored (PostgreSQL, 30 days)</td>
</tr>
<tr class="odd">
<td>Joint States</td>
<td>200 B</td>
<td>100 Hz</td>
<td>20 KB/s</td>
<td>Stored (InfluxDB, 30 days)</td>
</tr>
<tr class="even">
<td>Joint Commands</td>
<td>200 B</td>
<td>1000 Hz</td>
<td>200 KB/s</td>
<td>Not stored</td>
</tr>
<tr class="odd">
<td>Task Status</td>
<td>500 B</td>
<td>10 Hz</td>
<td>5 KB/s</td>
<td>Stored (PostgreSQL, 90 days)</td>
</tr>
<tr class="even">
<td>Logs</td>
<td>Variable</td>
<td>Continuous</td>
<td>~1 MB/hour</td>
<td>Elasticsearch (30 days)</td>
</tr>
</tbody>
</table>
<p><strong>Total Network Bandwidth:</strong> ~135 MB/s (peak), ~500 KB/s
(average) <strong>Total Storage:</strong> ~10 GB/month (operational
data) + ~720 MB/month (logs)</p>
<hr />
<h2 data-number="1.12" id="interface-specifications"><span
class="header-section-number">1.12</span> 10. Interface
Specifications</h2>
<h3 data-number="1.12.1" id="ros2-topic-interfaces"><span
class="header-section-number">1.12.1</span> 10.1 ROS2 Topic
Interfaces</h3>
<table style="width:100%;">
<colgroup>
<col style="width: 18%" />
<col style="width: 20%" />
<col style="width: 17%" />
<col style="width: 21%" />
<col style="width: 10%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Topic Name</strong></th>
<th><strong>Message Type</strong></th>
<th><strong>Publisher</strong></th>
<th><strong>Subscriber(s)</strong></th>
<th><strong>QoS</strong></th>
<th><strong>Rate</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>/camera/color/image_raw</code></td>
<td><code>sensor_msgs/Image</code></td>
<td>Camera Driver</td>
<td>Image Processor</td>
<td>Best Effort, Volatile</td>
<td>30 Hz</td>
</tr>
<tr class="even">
<td><code>/vision/detections</code></td>
<td><code>vision_msgs/Detection2DArray</code></td>
<td>Object Detector</td>
<td>Pose Estimator</td>
<td>Reliable, Volatile</td>
<td>20 Hz</td>
</tr>
<tr class="odd">
<td><code>/vision/object_poses</code></td>
<td><code>geometry_msgs/PoseArray</code></td>
<td>Pose Estimator</td>
<td>Task Orchestrator</td>
<td>Reliable, Transient Local</td>
<td>20 Hz</td>
</tr>
<tr class="even">
<td><code>/joint_states</code></td>
<td><code>sensor_msgs/JointState</code></td>
<td>Controller</td>
<td>Motion Planner, Metrics</td>
<td>Reliable, Volatile</td>
<td>100 Hz</td>
</tr>
<tr class="odd">
<td><code>/joint_trajectory</code></td>
<td><code>trajectory_msgs/JointTrajectory</code></td>
<td>Motion Planner</td>
<td>Controller</td>
<td>Reliable, Volatile</td>
<td>On demand</td>
</tr>
<tr class="even">
<td><code>/task/status</code></td>
<td><code>robot_msgs/TaskStatus</code></td>
<td>Orchestrator</td>
<td>Web Backend, Metrics</td>
<td>Reliable, Transient Local</td>
<td>10 Hz</td>
</tr>
</tbody>
</table>
<h3 data-number="1.12.2" id="ros2-service-interfaces"><span
class="header-section-number">1.12.2</span> 10.2 ROS2 Service
Interfaces</h3>
<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 11%" />
<col style="width: 14%" />
<col style="width: 17%" />
<col style="width: 15%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Service Name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Server</strong></th>
<th><strong>Client(s)</strong></th>
<th><strong>Timeout</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>/vision/detect_objects</code></td>
<td><code>vision_interfaces/DetectObjects</code></td>
<td>Object Detector</td>
<td>Orchestrator</td>
<td>2 s</td>
<td>Trigger object detection</td>
</tr>
<tr class="even">
<td><code>/grasp/compute_grasps</code></td>
<td><code>robot_interfaces/ComputeGrasps</code></td>
<td>Grasp Planner</td>
<td>Orchestrator</td>
<td>1 s</td>
<td>Generate grasp candidates</td>
</tr>
<tr class="odd">
<td><code>/planning_scene/get_objects</code></td>
<td><code>moveit_msgs/GetPlanningScene</code></td>
<td>Planning Scene</td>
<td>Motion Planner</td>
<td>0.5 s</td>
<td>Get current obstacles</td>
</tr>
</tbody>
</table>
<h3 data-number="1.12.3" id="ros2-action-interfaces"><span
class="header-section-number">1.12.3</span> 10.3 ROS2 Action
Interfaces</h3>
<table style="width:100%;">
<colgroup>
<col style="width: 20%" />
<col style="width: 12%" />
<col style="width: 14%" />
<col style="width: 18%" />
<col style="width: 16%" />
<col style="width: 17%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Action Name</strong></th>
<th><strong>Type</strong></th>
<th><strong>Server</strong></th>
<th><strong>Client(s)</strong></th>
<th><strong>Timeout</strong></th>
<th><strong>Feedback</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>/pick_place</code></td>
<td><code>robot_interfaces/PickPlace</code></td>
<td>Motion Planner</td>
<td>Orchestrator</td>
<td>30 s</td>
<td>Status, Progress (0-1)</td>
</tr>
<tr class="even">
<td><code>/gripper/command</code></td>
<td><code>control_msgs/GripperCommand</code></td>
<td>Gripper Controller</td>
<td>Motion Planner</td>
<td>5 s</td>
<td>Position, Effort</td>
</tr>
<tr class="odd">
<td><code>/follow_joint_trajectory</code></td>
<td><code>control_msgs/FollowJointTrajectory</code></td>
<td>Joint Controller</td>
<td>Motion Planner</td>
<td>20 s</td>
<td>Time from start, Error</td>
</tr>
</tbody>
</table>
<hr />
<h2 data-number="1.13" id="summary"><span
class="header-section-number">1.13</span> 11. Summary</h2>
<h3 data-number="1.13.1" id="block-decomposition-summary"><span
class="header-section-number">1.13.1</span> 11.1 Block Decomposition
Summary</h3>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 16%" />
<col style="width: 30%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Subsystem</strong></th>
<th><strong>Blocks</strong></th>
<th><strong>Key Technologies</strong></th>
<th><strong>Critical Interfaces</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Vision</strong></td>
<td>4 (Camera, Preprocessor, Detector, Pose)</td>
<td>YOLOv8, TensorRT, PCA</td>
<td><code>/vision/object_poses</code></td>
</tr>
<tr class="even">
<td><strong>Grasp Planning</strong></td>
<td>3 (Synthesizer, Evaluator, Collision)</td>
<td>NumPy, Open3D, MoveIt2</td>
<td><code>/grasp/compute_grasps</code></td>
</tr>
<tr class="odd">
<td><strong>Motion Planning</strong></td>
<td>4 (IK, Path, Trajectory, Collision)</td>
<td>MoveIt2, OMPL, KDL</td>
<td><code>/pick_place</code> action</td>
</tr>
<tr class="even">
<td><strong>Control</strong></td>
<td>3 (Manager, Traj Ctrl, HW Interface)</td>
<td>ros2_control, EtherCAT</td>
<td><code>/joint_trajectory</code></td>
</tr>
<tr class="odd">
<td><strong>Orchestration</strong></td>
<td>2 (BT Engine, Error Recovery)</td>
<td>BehaviorTree.CPP</td>
<td>All action clients</td>
</tr>
<tr class="even">
<td><strong>Monitoring</strong></td>
<td>2 (Metrics, Logging)</td>
<td>Prometheus, ELK Stack</td>
<td>ROS2 topic subscriptions</td>
</tr>
</tbody>
</table>
<h3 data-number="1.13.2" id="system-properties"><span
class="header-section-number">1.13.2</span> 11.2 System Properties</h3>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 23%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Property</strong></th>
<th><strong>Value</strong></th>
<th><strong>Achieved Through</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Modularity</strong></td>
<td>18 independent blocks</td>
<td>ROS2 node isolation, Docker containers</td>
</tr>
<tr class="even">
<td><strong>Latency</strong></td>
<td>&lt;2 sec end-to-end</td>
<td>Optimized pipeline, GPU acceleration, parallel processing</td>
</tr>
<tr class="odd">
<td><strong>Throughput</strong></td>
<td>30 picks/min</td>
<td>1 kHz control loop, efficient planning</td>
</tr>
<tr class="even">
<td><strong>Reliability</strong></td>
<td>99.5% uptime</td>
<td>Error recovery, health monitoring, redundant strategies</td>
</tr>
<tr class="odd">
<td><strong>Scalability</strong></td>
<td>1-10 robots</td>
<td>Stateless design, horizontal scaling (vision, backend)</td>
</tr>
</tbody>
</table>
<hr />
<p><strong>Document Status:</strong> ✅ v1.0 Complete <strong>Next
Document:</strong> Software Architecture Document (SAD)
<strong>Dependencies:</strong> High-Level Design (08), Low-Level Design
(14), C4 Model (15)</p>
<hr />
</body>
</html>
